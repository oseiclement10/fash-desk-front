name: Deploy To Cpanel

on:
  push:
    branches: [main]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
        - name: Pull Project
          uses: actions/checkout@v4

        - name: Install Node
          uses: actions/setup-node@v4
          with:
            node-version: 20

        - name: Install Dependencies
          run: npm ci

        - name: Build Project
          run: npm run build

        - name: Deploy To Cpanel 
          uses: Samkirkland/FTP-Deploy-Action@v4.3.5
          with: 
            server: ${{secrets.FTP_HOST}}
            username: ${{secrets.FTP_USERNAME}}
            password: ${{secrets.FTP_PASSWORD}}
            server-dir: /
            local-dir: './dist'
